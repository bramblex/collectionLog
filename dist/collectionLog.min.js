!function(o){var n={};function i(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return o[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}i.m=o,i.c=n,i.d=function(e,t,o){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(o,n,function(e){return t[e]}.bind(null,n));return o},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var f=o(1),n=function(){function e(e,t){void 0===e&&(e=""),void 0===t&&(t=""),this.initialTime=(new Date).getTime(),this.postUrl=t,this.options={appid:e,lang:"",os:"",ua:"",bro:"",broV:"",w:0,h:0,x:0,y:0,site:"",href:"",spa:"no",uid:"",stay:0,type:"",reg:"",pos:"",ex:"",now:"",pid:"",page:"",isPhone:!1},this.windowWidth=window.innerWidth||window.screen.availWidth||0,this.windowHeight=window.innerHeight||window.screen.availHeight||0,this.visitTags=document.querySelectorAll(".clog-visit")||[],this.isCanPost=!0,this.isPhone=!1,this.initOptions()}return e.prototype.initOptions=function(){this.options.lang=navigator.language||navigator.browserLanguage||navigator.systemLanguage||navigator.userLanguage||"",this.options.os=navigator.platform||"",this.options.ua=navigator.userAgent||"",this.options.w=document.body.clientWidth||screen.availWidth||0,this.options.h=document.body.clientHeight||screen.availHeight||0,this.options.site=location.origin||location.host||"",this.options.href=location.href,this.options.pid=f.default.generatePvId(),-1<location.href.indexOf("#/")?this.options.spa="yes":this.options.spa="no";var e=f.default.checkBrowser();this.options.bro=e.browser,this.options.broV=e.browserVersion,this.options.isPhone=e.isPhone,this.isPhone=e.isPhone,this.extraScrollWatchElements=[],this.addEvent()},e.prototype.addEvent=function(){var o=this,t=null;document.removeEventListener("DOMSubtreeModified",function(){}),document.addEventListener("DOMSubtreeModified",function(e){var t=document.querySelectorAll(".clog-visit");t.length!=o.visitTags.length&&(o.visitTags=t)}),document.body.removeEventListener("click",function(){}),document.body.addEventListener("click",function(e){-1<e.target.className.indexOf("clog-click")&&o.clickLog(e)}),document.removeEventListener("scroll",function(){}),document.addEventListener("scroll",function(e){t&&clearTimeout(t),t=setTimeout(function(){document.querySelectorAll(".clog-visit").length&&o.visitLog(e)},500)}),window.removeEventListener("error",function(){}),window.addEventListener("error",function(e){o.errorLog({msg:e.message||"no message",file:e.filename||"no file"})},!0),window.removeEventListener("unhandledrejection",function(){}),window.addEventListener("unhandledrejection",function(e){o.errorLog({msg:e.reason||"no message",file:e.target&&e.target.name||"no file"})},!0)},e.prototype.clickLog=function(e){var t=e.target,o=t.getAttribute("clog-region")||"none",n=t.getAttribute("clog-pos")||"none",i=e.pageX||"none",r=e.pageY||"none",s=t.getAttribute("clog-ex")||"none",a=t.getAttribute("clog-page")||document.title||"none";this.sendLog("click",o,n,i,r,s,a)},e.prototype.visitLog=function(e){for(var t=document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop||document.scrollingElement.scrollTop||0,o=!1,n={region:"",pos:"",pageX:"0",pageY:t.toString(),extraInfo:"",page:""},i=0;i<this.visitTags.length;i++){var r=this.visitTags[i];if(t<=r.offsetTop+r.offsetHeight&&t+this.windowHeight>=r.offsetTop+r.offsetHeight){o=!0;var s=r.getAttribute("clog-region")||"none",a=r.getAttribute("clog-pos")||"none",c=r.getAttribute("clog-ex")||"none",l=r.getAttribute("clog-page")||document.title||"none";n.region+=s+",",n.pos+=a+",",n.extraInfo+=c+",",n.page+=l+","}}o&&(n.region=n.region.substr(0,n.region.length-1),n.pos=n.pos.substr(0,n.pos.length-1),n.extraInfo=n.extraInfo.substr(0,n.extraInfo.length-1),n.page=n.page.substr(0,n.page.length-1),this.sendLog("visit",n.region,n.pos,n.pageX,n.pageY,n.extraInfo,n.page))},e.prototype.errorLog=function(e){var t="";e&&(t+="msg:"+e.msg,t+=";file:"+e.file);var o=document.title||"";this.sendLog("error","error","","","",t,o)},e.prototype.sendLog=function(e,t,o,n,i,r,s){var a=this;if(this.isCanPost){if(!this.options.uid)if(document.cookie,/uid=[\w\d-_=\.]+\;/i.test(document.cookie)){var c=document.cookie.match(/uid=[\w\d-_=\.]+\;/i);c&&c.length&&(this.options.uid=c[0].replace("uid=","").replace(";","")||"")}else localStorage.getItem("uid")?this.options.uid=localStorage.getItem("uid")||"":sessionStorage.getItem("uid")&&(this.options.uid=sessionStorage.getItem("uid")||"");var l=Object.assign({},this.options),u=this.postUrl+"/collect/"+e;if(l.stay=f.default.getStayLong(this.initialTime),l.type=e||"",l.reg=t||"",l.pos=o||"",l.x=n||"",l.y=i||"",l.ex=r||"",l.page=s||"",l.now=(new Date).getTime(),u+=f.default.json2params(l),window.fetch)fetch(u,{method:"GET",headers:new Headers({})}).catch(function(e){a.isCanPost=!1,setTimeout(function(){a.isCanPost=!0},5e3)});else if(window.XMLHttpRequest){var g=new XMLHttpRequest;g.onload=function(){g=null},g.onerror=function(){a.isCanPost=!1,setTimeout(function(){a.isCanPost=!0},5e3),g=null},g.open("GET",u),g.send()}else{var d=new Image;d.src=u,d.onload=function(){d=null},d.onerror=function(){d=null}}}},e.prototype.getDocumentVisit=function(){this.visitLog(null)},e.prototype.addScrollWatch=function(){var o=null;if(!arguments[0])throw new Error("初始化绑定选元素失败,无输入元素");var n=(o="string"==typeof arguments[0]?document.querySelector(arguments[0]):arguments[0]).id||"",i=o.className||"";if(!(n+i))throw new Error("初始化绑定选元素失败,所选元素没有id和class");if(n=n?"#"+n:"",i=i?"."+i:"",!this.extraScrollWatchElements.includes(n+i)){this.extraScrollWatchElements.push(n+i);var t=null;o.addEventListener("scroll",function(e){t&&clearTimeout(t),t=setTimeout(function(){var e=document.querySelectorAll(n+i+" .clog-visit");if(e.length){(o.scrollTop||0).toString();for(var t=0;t<e.length;t++)e[t]}},500)})}},e.prototype.addCustomEvent=function(e,t){var c=this;if(void 0===e&&(e=""),void 0===t&&(t=null),!e||!t)throw new Error("初始化绑定选元素失败,无输入元素");"string"==typeof t&&(t=document.querySelector(e)),t.addEventListener(e,function(e){var t=e.target,o=t.getAttribute("clog-region")||"none",n=t.getAttribute("clog-pos")||"none",i=e.pageX||"none",r=e.pageY||"none",s=t.getAttribute("clog-ex")||"none",a=t.getAttribute("clog-page")||document.title||"none";c.sendLog("custom",o,n,i,r,s,a)})},e}();t.CollectionLog=n,window.CollectionLog=n},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={generatePvId:function(){for(var e=new Array(16),t=0,o=void 0;t<16;t++)0==(3&t)&&(o=4294967296*Math.random()),e[t]=o>>>((3&t)<<3)&255;e[6]=15&e[6]|64,e[8]=63&e[8]|128;for(var n="",i=0;i<16;i++)i%4==0&&0<i&&(n+="-"),n+=e[i].toString(16);return n},params2json:function(e){void 0===e&&(e="");for(var t=e.split("?")[1].split("&"),o=new Object,n=0;n<t.length;n++){var i=t[n].indexOf("=");if(-1!=i){var r=t[n].substring(0,i),s=t[n].substring(i+1);o[r]=decodeURIComponent(s)}}return o},json2params:function(e){if(void 0===e&&(e={}),!e)return"";var t="?";for(var o in e)t+=o,t+="="+(encodeURIComponent(e[o])||""),t+="&";return t.substr(0,t.length-1)},getStayLong:function(e){return void 0===e&&(e=0),Math.ceil(((new Date).getTime()-e)/1e3)},checkBrowser:function(){var e,t=String(window.navigator.userAgent).toLocaleLowerCase(),o={browser:"",browserVersion:"",isPhone:!1};if(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/gi.test(t)&&(o.isPhone=!0),/(micromessenger)|(windowswechat)/gi.test(t))return o.browser="wechat",o;if(/UCBrowser/gi.test(t))return o.browser="UCBrowser",o;if(/QQBrowser/gi.test(t))return o.browser="QQBrowser",o;if(/chrome/gi.test(t)){o.browser="chrome";var n=(e=/chrome\/\w+/gi.exec(t))&&0<e.length&&Number(e[0].replace("chrome/",""))||0;return o.browserVersion=n,o}return/firefox/gi.test(t)?(o.browser="firefox",n=(e=/firefox\/\w+/gi.exec(t))&&0<e.length&&Number(e[0].replace("firefox/",""))||0,o.browserVersion=n):/(trident)|(mise)/gi.test(t)?o.browser="ie":/edge/gi.test(t)?(o.browser="edge",n=(e=/edge\/\w+/gi.exec(t))&&0<e.length&&Number(e[0].replace("edge/",""))||0,o.browserVersion=n):/version\/([\d.]+).*safari/gi.test(t)?o.browser="safari":/opera/gi.test(t)?o.browser="opera":/webkit/gi.test(t)&&(o.browser="webkit"),o}}}]);